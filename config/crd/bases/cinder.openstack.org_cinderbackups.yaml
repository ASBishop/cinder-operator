---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: cinderbackups.cinder.openstack.org
spec:
  group: cinder.openstack.org
  names:
    kind: CinderBackup
    listKind: CinderBackupList
    plural: cinderbackups
    singular: cinderbackup
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: CinderBackup is the Schema for the cinderbackups API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: CinderBackupSpec defines the desired state of CinderBackup
            properties:
              containerImage:
                description: ContainerImage - Cinder Backup Container Image URL
                type: string
              customServiceConfig:
                default: '# add your customization here'
                description: CustomServiceConfig - customize the service config using
                  this parameter to change service defaults, or overwrite rendered
                  information using raw OpenStack config format. The content gets
                  added to to /etc/<service>/<service>.conf.d directory as custom.conf
                  file.
                type: string
              databaseHostname:
                description: DatabaseHostname - Cinder Database Hostname
                type: string
              databaseUser:
                default: cinder
                description: 'DatabaseUser - optional username used for cinder DB,
                  defaults to cinder TODO: -> implement needs work in mariadb-operator,
                  right now only cinder'
                type: string
              debug:
                description: Debug - enable debug for different deploy stages. If
                  an init container is used, it runs and the actual action pod gets
                  started with sleep infinity
                properties:
                  bootstrap:
                    default: false
                    description: Bootstrap enable debug
                    type: boolean
                  dbSync:
                    default: false
                    description: DBSync enable debug
                    type: boolean
                  service:
                    default: false
                    description: Service enable debug
                    type: boolean
                type: object
              defaultConfigOverwrite:
                additionalProperties:
                  type: string
                description: 'ConfigOverwrite - interface to overwrite default config
                  files like e.g. logging.conf or policy.json. But can also be used
                  to add additional files. Those get added to the service config dir
                  in /etc/<service> . TODO: -> implement'
                type: object
              nodeSelector:
                additionalProperties:
                  type: string
                description: NodeSelector to target subset of worker nodes for running
                  the Backup service
                type: object
              passwordSelectors:
                description: PasswordSelectors - Selectors to identify the DB and
                  TransportURL from the Secret
                properties:
                  admin:
                    default: CinderPassword
                    description: Database - Selector to get the cinder service password
                      from the Secret
                    type: string
                  database:
                    default: CinderDatabasePassword
                    description: 'Database - Selector to get the cinder database user
                      password from the Secret TODO: not used, need change in mariadb-operator'
                    type: string
                  transportUrl:
                    default: TransportURL
                    description: Database - Selector to get the cinder service password
                      from the Secret
                    type: string
                type: object
              replicas:
                description: Replicas - Cinder Backup Replicas
                format: int32
                type: integer
              resources:
                description: Resources - Compute Resources required by this service
                  (Limits/Requests). https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                properties:
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Limits describes the maximum amount of compute resources
                      allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Requests describes the minimum amount of compute
                      resources required. If Requests is omitted for a container,
                      it defaults to Limits if that is explicitly specified, otherwise
                      to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                type: object
              secret:
                description: Secret containing OpenStack password information for
                  CinderDatabasePassword
                type: string
              serviceUser:
                default: cinder
                description: ServiceUser - optional username used for this service
                  to register in cinder
                type: string
            type: object
          status:
            description: CinderBackupStatus defines the observed state of CinderBackup
            properties:
              conditions:
                description: Conditions
                items:
                  description: Condition - A particular overall condition of a certain
                    resource
                  properties:
                    lastHearbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      description: Reason - Why a particular condition is true, false
                        or unknown
                      type: string
                    status:
                      type: string
                    type:
                      description: Type - A summarizing name for a given condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              hash:
                additionalProperties:
                  type: string
                description: Map of hashes to track e.g. job status
                type: object
              readyCount:
                description: ReadyCount of Cinder Backup instances
                format: int32
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
